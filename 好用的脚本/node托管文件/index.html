<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        #div {
            width: 200px;
            height: 200px;
            border: 1px solid #000;
        }

        input {
            opacity: 0;
        }
    </style>
    <script src="./static/clipboard.min.js"></script>
</head>

<body>
    <div id="div" data-clipboard-target="#input">剪切板</div>
    <input id="inputt" type="text" style="opacity: 0;z-index: -1;" value="嘿嘿嘿">
    <textarea id="input" ></textarea>
    <script>
        var div = document.getElementById('div')
        div.onclick = function (e) {
            //安卓可以使用这个方式
            // var input = document.createElement("input");
            // input.value = '测试' + new Date().getSeconds();
            // document.body.appendChild(input);
            // input.style.opacity = 0;
            // input.style.zIndex = -1;
            // var input = document.getElementById('inputt')
            // input.select();
            // input.setSelectionRange(0, input.value.length), document.execCommand('Copy');
            // document.body.removeChild(input);
            // alert('修改剪切板成功')


            // var text = '测试' + new Date().getSeconds()
            // if (e.clipboardData.setData("text", text)) {
            //     alert("复制成功!")
            // } else {
            //     alert("复制失败!")
            // }

            //ios的使用方法--不行
            // var save = function (e) {
            //     var clipboardData = e.clipboardData || window.clipboardData
            //     var text = '测试' + new Date().getSeconds()
            //     clipboardData.setData('text/plain', text)
            //     e.preventDefault();
            // }
            // document.addEventListener('copy', save);
            // document.execCommand('copy');
            // document.removeEventListener('copy', save);
            // alert('复制成功')

            //ios的使用方法 -- 
            // var input = document.createElement('input')//要复制文字的节点    
            // input.value = '测试' + new Date().getSeconds()
            // var range = document.createRange();
            // // 选中需要复制的节点    
            // range.selectNode(input);
            // // 执行选中元素    
            // window.getSelection().addRange(range);
            // // 执行 copy 操作    
            // var successful = document.execCommand('copy');
            // try {
            //     var msg = successful ? 'successful' : 'unsuccessful';

            //     console.log('copy is' + msg);
            // } catch (err) {
            //     console.log('Oops, unable to copy');
            // }
            // // 移除选中的元素    
            // window.getSelection().removeAllRanges();


            //ios的使用方法 --暂时可用
            let t = document.getElementById("input");
            t.value = '测试' + new Date().getSeconds();
            //实例化clipboard  
            var clipboard = new ClipboardJS('#div');
            clipboard.on("success", function (e) {
                // $(".alertMsg").html("复制成功！");
                // $(".modal-bg").css("display", "block");
                alert('复制成功');
                e.clearSelection();
            });
            clipboard.on("error", function (e) {
                $(".alertMsg").html("请选择“拷贝”进行复制!");
                $(".modal-bg").css("display", "block");
            });
        }
    </script>
</body>

</html>